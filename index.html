<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>Night In</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.4.3/dist/css/foundation.min.css" integrity="sha256-GSio8qamaXapM8Fq9JYdGNTvk/dgs+cMLgPeevOYEx0= sha384-wAweiGTn38CY2DSwAaEffed6iMeflc0FMiuptanbN4J+ib+342gKGpvYRWubPd/+ sha512-QHEb6jOC8SaGTmYmGU19u2FhIfeG+t/hSacIWPpDzOp5yygnthL3JwnilM7LM1dOAbJv62R+/FICfsrKUqv4Gg==" crossorigin="anonymous">

</head>

<body>
  <div class="top-bar">
    <div class="top-bar-left">
      <ul class="dropdown menu" data-dropdown-menu>
        <li class="menu-text">Night In</li>
        <li><a href="#">One</a></li>
        <li><a href="#">Two</a></li>
        <li><a href="#">Three</a></li>
      </ul>
    </div>
    <div class="top-bar-right">
    </div>
  </div>  

  <br>

  <div class="grid-x">
    <div class="cell small-3"></div>
    <div class="card small-6">
      <div class="card-divider">
        Time for a great night in!
      </div>
      <div class="card-section">
        <label>
          What do you want to eat?
          <textarea id="search-input" placeholder="Ex: Spaghetti"></textarea>
        </label>
        <div class="input-group-button">
          <input type="submit" class="button" id="submit-button" value="Submit">
        </div>
      </div>
    </div>
    <div class="cell small-3"></div>
  </div>  

  <div id="recipes"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">

function displayRecipeInfo() {

var query = "spaghetti";
var ingredients ="onions";
//  $(this).attr("data-name");
var queryURL = "https://recipe-puppy.p.rapidapi.com/?p=1&i=" + ingredients + "&q=" + query 

// Creating an AJAX call for the specific movie button being clicked
var settings = {
	"async": true,
	"crossDomain": true,
	"url": queryURL,
	"method": "GET",
	"headers": {
		"x-rapidapi-host": "recipe-puppy.p.rapidapi.com",
		"x-rapidapi-key": "3606c3e55cmsh29177efa7ad81c4p1104c9jsna3124ed278ee"
	}
};

// $.ajax({
//   url: queryURL,
//   method: "GET"
// }).then(function(response) {



$.ajax(settings).then(function (response) {
response = JSON.parse(response);
console.log(response);


// displayRecipe();{


  // Creating a div to hold the recipe√ü
  var recipeDiv = $("<div class='recipe'>");

  // Storing the rating data
  var title = response.results[0].title;

  // Creating an element to have the rating displayed
  var pOne = $("<p>").text("Recipe: " + title);

  // Displaying the rating
  recipeDiv.append(pOne);

  // Storing the release year
  var link = response.results[0].href;

  // Creating an element to hold the release year
  var pTwo = $("<a>").html(link);
  pTwo.attr('href', link);  

  // Displaying the release year
  recipeDiv.append(pTwo);

  // Storing the plot
  var ingredients = response.results[0].ingredients;

  // Creating an element to hold the plot
  var pThree = $("<p>").text("Ingredients: " + ingredients);

  // Appending the plot
  recipeDiv.append(pThree);

  // Retrieving the URL for the image
  var imgURL = response.results[0].thunbnail;

  // Creating an element to hold the image
  var image = $("<img>").attr("src", imgURL);

  // Appending the image
  recipeDiv.append(image);

  // Putting the entire movie above the previous movies
  $("#recipes").prepend(recipeDiv);

});

}

// // Function for displaying movie data
// function renderButtons() {

// // Deleting the movies prior to adding new movies
// // (this is necessary otherwise you will have repeat buttons)
// $("#buttons-view").empty();

// // Looping through the array of movies
// for (var i = 0; i < movies.length; i++) {

//   // Then dynamicaly generating buttons for each movie in the array
//   // This code $("<button>") is all jQuery needs to create the beginning and end tag. (<button></button>)
//   var a = $("<button>");
//   // Adding a class of movie-btn to our button
//   a.addClass("movie-btn");
//   // Adding a data-attribute
//   a.attr("data-name", movies[i]);
//   // Providing the initial button text
//   a.text(movies[i]);
//   // Adding the button to the buttons-view div
//   $("#buttons-view").append(a);
// }
// }

// This function handles events where a movie button is clicked
$("#submit-button").on("click", function(event) {
event.preventDefault();
// This line grabs the input from the textbox
var recipe = $("#search-input").val().trim();
displayRecipeInfo();

// // Adding movie from the textbox to our array
// movies.push(movie);

// // Calling renderButtons which handles the processing of our movie array
// renderButtons();
// });

// // Adding a click event listener to all elements with a class of "movie-btn"
// $(document).on("click", "#submit-button", displayRecipeInfo);

// Calling the renderButtons function to display the initial buttons
// renderButtons();

})



</script>

<script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.4.3/dist/js/foundation.min.js" integrity="sha256-mRYlCu5EG+ouD07WxLF8v4ZAZYCA6WrmdIXyn1Bv9Vk= sha384-KzKofw4qqetd3kvuQ5AdapWPqV1ZI+CnfyfEwZQgPk8poOLWaabfgJOfmW7uI+AV sha512-0gHfaMkY+Do568TgjJC2iMAV0dQlY4NqbeZ4pr9lVUTXQzKu8qceyd6wg/3Uql9qA2+3X5NHv3IMb05wb387rA==" crossorigin="anonymous"></script>

  

</body>

</html>
